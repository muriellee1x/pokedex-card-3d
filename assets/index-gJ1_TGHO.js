(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const A of i.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&h(A)}).observe(document,{childList:!0,subtree:!0});function L(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function h(r){if(r.ep)return;r.ep=!0;const i=L(r);fetch(r.href,i)}})();document.addEventListener("DOMContentLoaded",function(){const m=document.getElementById("background-animation"),c=15;let L=0,h=1,r=[],i=0;const A=90;let D=!1,H=[];function j(){m.innerHTML="",r=[],H=[];let e=c,t=0;const n=document.createElement("div");n.style.position="fixed",n.style.top="50%",n.style.left="50%",n.style.transform="translate(-50%, -50%)",n.style.color="white",n.style.fontFamily="Fredoka, sans-serif",n.style.fontSize="20px",n.textContent="加载背景中...",document.body.appendChild(n);for(let o=0;o<c;o++){const y=`/background-animation/background-ocean${o.toString().padStart(2,"0")}.png`,f=new Image;f.onload=function(){t++,n.textContent=`加载背景中... ${Math.floor(t/e*100)}%`,t===e&&(s(),D=!0,document.body.removeChild(n),r[0]&&r[0].classList.add("active"),r[1]&&r[1].classList.add("next"),requestAnimationFrame(Y))},f.onerror=function(){console.error(`Failed to load image: ${y}`),t++},f.src=y,H.push(f)}function s(){for(let o=0;o<c;o++){const y=`/background-animation/background-ocean${o.toString().padStart(2,"0")}.png`,f=document.createElement("div");f.className="background-frame",f.style.backgroundImage=`url(${y})`,m.appendChild(f),r.push(f)}}}function Y(e){if(!D){requestAnimationFrame(Y);return}i||(i=e),e-i>=A&&(h=(L+1)%c,r.forEach((n,s)=>{s===L?(n.classList.remove("next"),n.classList.add("active")):s===h?(n.classList.remove("active"),n.classList.add("next")):n.classList.remove("active","next")}),L=h,h=(L+1)%c,r[h].classList.add("next"),i=e),requestAnimationFrame(Y)}j();function G(){document.querySelectorAll(".typewriter-text").forEach(t=>{t.style.animation="none",t.offsetHeight,t.style.animation=null})}G(),window.addEventListener("scroll",function(){const e=document.getElementById("background-star");if(!e)return;const t=document.documentElement.scrollHeight-window.innerHeight,s=window.scrollY/t*180;e.style.transform=`translate(-50%, -50%) rotate(${s}deg)`});const E=document.querySelector(".explore-title");function J(){if(!E)return;E.classList.remove("animate"),E.querySelectorAll(".typewriter-text").forEach(t=>{t.style.animation="none",t.offsetHeight,t.style.animation=null}),setTimeout(()=>{E.classList.add("animate")},50)}const Q=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting?J():t.target.classList.remove("animate")})},{threshold:.5,rootMargin:"0px"});E&&Q.observe(E);const u=document.getElementById("custom-cursor");document.addEventListener("mousemove",function(e){u.style.left=e.clientX+"px",u.style.top=e.clientY+"px"}),document.querySelectorAll('a, button, input[type="submit"], input[type="button"], .nav-button, .footer-link').forEach(e=>{e.addEventListener("mouseenter",function(){u.classList.add("pointer")}),e.addEventListener("mouseleave",function(){u.classList.remove("pointer")})}),document.body.classList.remove("overflow-hidden");const N=document.querySelector(".card-carousel"),P=document.querySelector(".card-showcase"),B=document.querySelectorAll(".card"),a=["card1","card2","card3","card4","card5"],S=a.length;let l=0;N.dataset.currentPosition=l;function _(){document.querySelectorAll(".card-clone").forEach(e=>e.remove());for(let e=0;e<a.length;e++){const n=document.querySelector(`.${a[e]}`).cloneNode(!0);n.classList.add("card-clone","left-clone"),n.classList.add(`clone-${a[e]}`),P.appendChild(n)}for(let e=0;e<a.length;e++){const n=document.querySelector(`.${a[e]}`).cloneNode(!0);n.classList.add("card-clone","right-clone"),n.classList.add(`clone-${a[e]}`),P.appendChild(n)}document.querySelectorAll(".card-clone").forEach(e=>{e.addEventListener("mousemove",z),e.addEventListener("mouseleave",W),e.addEventListener("click",R)})}_(),b(),window.addEventListener("resize",b);function g(e,t,n){const s=a.indexOf(e);if(s===-1)return 0;let o=s-l;return t&&(n==="left"?o-=S:n==="right"&&(o+=S)),o}function b(){window.requestAnimationFrame(()=>{a.forEach(e=>{const t=document.querySelector(`.${e}`);if(!t)return;const n=g(e,!1),s=x(n);t.style.transform=s}),a.forEach(e=>{const t=document.querySelector(`.clone-${e}.left-clone`);if(!t)return;const n=g(e,!0,"left");t.style.transform=x(n)}),a.forEach(e=>{const t=document.querySelector(`.clone-${e}.right-clone`);if(!t)return;const n=g(e,!0,"right");t.style.transform=x(n)})}),N.dataset.currentPosition=l}function z(e){var Z;const t=this.getBoundingClientRect(),n=e.clientX-t.left,s=e.clientY-t.top,o=t.width/2,p=t.height/2,y=Math.round((n-o)/o*5)/5,f=Math.round((s-p)/p*5)/5;let O;if(this.classList.contains("card-clone")){const q=(Z=Array.from(this.classList).find(oe=>oe.startsWith("clone-")))==null?void 0:Z.substring(6);if(!q)return;const X=this.classList.contains("left-clone")?"left":"right";O=g(q,!0,X)}else{const q=Array.from(this.classList).find(X=>a.includes(X));if(!q)return;O=g(q,!1)}const ne=x(O);this.style.transform=`${ne} perspective(800px) rotateY(${y*15}deg) rotateX(${-f*15}deg) translateZ(20px)`}function W(){var n;let e;if(this.classList.contains("card-clone")){const s=(n=Array.from(this.classList).find(p=>p.startsWith("clone-")))==null?void 0:n.substring(6);if(!s)return;const o=this.classList.contains("left-clone")?"left":"right";e=g(s,!0,o)}else{const s=Array.from(this.classList).find(o=>a.includes(o));if(!s)return;e=g(s,!1)}const t=x(e);requestAnimationFrame(()=>{this.style.transform=t})}function R(){if(d)return;let e,t;if(this.classList.contains("card-clone")){const o=Array.from(this.classList).find(y=>y.startsWith("clone-"));if(!o)return;t=o.substring(6);const p=this.classList.contains("left-clone")?"left":"right";e=g(t,!0,p)}else{if(t=Array.from(this.classList).find(o=>a.includes(o)),!t)return;e=g(t,!1)}const n=x(e),s=n+" scale(0.95)";requestAnimationFrame(()=>{this.style.transform=s}),setTimeout(()=>{requestAnimationFrame(()=>{this.style.transform=n});let o="";switch(t){case"card1":o="./cards/card-mew.html";break;case"card2":break;case"card3":o="./cards/card-mew.html";break;case"card4":o="./cards/card-mew.html";break}o&&(window.location.href=o)},150)}B.forEach(e=>{e.addEventListener("mousemove",z),e.addEventListener("mouseleave",W),e.addEventListener("click",R)});const ee=document.querySelector(".prev-button"),te=document.querySelector(".next-button");function k(){B.forEach(e=>{e.style.transition="transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1), opacity 0.5s ease"}),document.querySelectorAll(".card-clone").forEach(e=>{e.style.transition="transform 0.5s cubic-bezier(0.25, 0.1, 0.25, 1), opacity 0.5s ease"})}function F(){setTimeout(()=>{B.forEach(e=>{e.style.transition=""}),document.querySelectorAll(".card-clone").forEach(e=>{e.style.transition=""})},500)}let d=!1,v,U=0,C;const T=500;let I=!1;function V(){const e=P.getBoundingClientRect(),t=window.innerHeight;I=e.top>=0&&e.top<=t||e.bottom>=0&&e.bottom<=t||e.top<0&&e.bottom>t}V(),window.addEventListener("scroll",function(){V()}),window.addEventListener("wheel",function(e){if(!I)return;const t=Date.now();if(t-U<T)return;const n=l<=0,s=l>=S-1;e.deltaY>0&&s||e.deltaY<0&&n||(e.preventDefault(),!d&&(d=!0,U=t,k(),requestAnimationFrame(()=>{e.deltaY>0?l+=1:l-=1,b()}),clearTimeout(v),v=setTimeout(()=>{d=!1,F()},T)))},{passive:!1});let K;window.addEventListener("touchstart",function(e){I&&(C=e.touches[0].clientY,K=e.touches[0].clientX)},{passive:!1}),window.addEventListener("touchmove",function(e){if(!I||!C||d)return;const t=e.touches[0].clientY,n=e.touches[0].clientX,s=C-t,o=K-n;if(Math.abs(o)>Math.abs(s))return;const p=l<=0,y=l>=S-1;if(s>0&&y||s<0&&p){C=null;return}Math.abs(s)>20&&(e.preventDefault(),d=!0,k(),requestAnimationFrame(()=>{s>0?l+=1:l-=1,b()}),C=null,clearTimeout(v),v=setTimeout(()=>{d=!1,F()},T))},{passive:!1}),window.addEventListener("touchend",function(){C=null},{passive:!1}),ee.addEventListener("click",function(){d||(d=!0,k(),requestAnimationFrame(()=>{l-=1,b()}),clearTimeout(v),v=setTimeout(()=>{d=!1,F()},T))}),te.addEventListener("click",function(){d||(d=!0,k(),requestAnimationFrame(()=>{l+=1,b()}),clearTimeout(v),v=setTimeout(()=>{d=!1,F()},T))});const $=document.getElementById("mis-link"),M=document.getElementById("mail-link"),w=document.getElementById("copy-popup");$&&w&&($.addEventListener("click",function(){const e=document.createElement("textarea");e.value="liyixiao07",e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),w.textContent="mis号已复制到剪贴板",w.classList.add("show"),setTimeout(function(){w.classList.remove("show")},3e3)}),$.addEventListener("mouseenter",function(){u&&u.classList.add("pointer")}),$.addEventListener("mouseleave",function(){u&&u.classList.remove("pointer")})),M&&w&&(M.addEventListener("click",function(){const e=document.createElement("textarea");e.value="muriellee1x@gmail.com",e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),w.textContent="邮箱号已复制到剪贴板",w.classList.add("show"),setTimeout(function(){w.classList.remove("show")},3e3)}),M.addEventListener("mouseenter",function(){u&&u.classList.add("pointer")}),M.addEventListener("mouseleave",function(){u&&u.classList.remove("pointer")}))});function x(m){const L=window.innerWidth<=768?120:350;let h=m*L,r=0,i=0;return i=-m*10,r=80-Math.pow(m,2)*30,`translateX(${h}px) translateY(${r}px) rotate(${i}deg)`}document.addEventListener("DOMContentLoaded",()=>{const m=document.querySelector(".top-nav");function c(){window.scrollY>50?(m.classList.add("top-nav-scrolled"),document.body.classList.add("has-fixed-nav")):(m.classList.remove("top-nav-scrolled"),document.body.classList.remove("has-fixed-nav"))}window.addEventListener("scroll",c),c()});
